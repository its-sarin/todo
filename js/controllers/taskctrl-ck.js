app.controller("TaskCtrl",["$scope","$rootScope","$location","angularFire","$window","authService",function(e,t,n,r,i,s){console.log(n.host());var o=n.path().replace(/[^\w\s]/gi,"");console.log(o);e.list=o;var u=new Firebase("https://listify.firebaseio.com/lists/"+o+"/incomplete");e.tasks=[];r(u,e,"tasks");var a=new Firebase("https://listify.firebaseio.com/lists/"+o+"/completed");e.completedTasks=[];r(a,e,"completedTasks");t.$on("login",function(t,n){var i=new Firebase("https://listify.firebaseio.com/lists/"+o+"/users/");console.log(n.uid);e.users=[];e.users.push({user:n.uid});r(i,e,"users")});e.createNewList=function(){if(/^ *$/.test(e.newListName))return;var t=e.newListName.replace(/[^\w\s]/gi,""),n=(new Date).getUTCMilliseconds(),r=(new Date).getUTCDay(),s=Math.floor(Math.random()*10);list=t+"-"+n+r+s;var o=new Firebase("https://listify.firebaseio.com/lists/"+list+"/auth");o.set({authorized:"true"});i.open("/#"+list);e.newListName=""};e.addTask=function(t){var n=t.char||t.keyCode,r=t.target||t.srcElement,i={};if(n!=13||/^ *$/.test(r.value))return;i.value=e.todo;i.id=(new Date).getUTCMilliseconds()+Math.floor(Math.random()*10);e.tasks.push({task:i.value,id:i.id});e.todo=""};e.completeTask=function(t){e.tasks.splice(t,1);e.completedTasks.push(this.task)};e.undoComplete=function(t){e.completedTasks.splice(t,1);e.tasks.push(this.completedTask)};e.removeTask=function(t){e.tasks.splice(t,1)};e.clearCompletedTasks=function(t){t.preventDefault();e.completedTasks=[]}}]);